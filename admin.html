<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabarimala 2026 - Admin Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ™ Sabarimala 2026</h1>
            <p>Admin Dashboard</p>
            <p id="groupName" class="group-name"></p>
        </div>

        <div id="statusMessage"></div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('pending')">â³ Pending Approvals</button>
            <button class="tab" onclick="switchTab('registrations')">ğŸ“ Registration Requests</button>
            <button class="tab" onclick="switchTab('summary')">ğŸ“Š Summary</button>
            <button class="tab" onclick="switchTab('balance')">ğŸ’µ My Balance</button>
            <button class="tab" onclick="switchTab('participants')">ğŸ‘¥ Participants</button>
            <button class="tab" onclick="switchTab('links')">ğŸ”— User Links</button>
            <button class="tab" onclick="switchTab('expenses')">ğŸ’° Expenses</button>
            <button class="tab" onclick="switchTab('settlements')">ğŸ§® Settlements</button>
        </div>

        <!-- Pending Approvals Tab -->
        <div id="pending" class="tab-content active">
            <h2>Pending Expense Approvals</h2>
            <div id="pendingList">
                <!-- Pending expenses will be loaded here -->
            </div>
        </div>

        <!-- Registration Requests Tab -->
        <div id="registrations" class="tab-content">
            <h2>Registration Requests</h2>
            <p class="note-text">
                Users who want to join the group will appear here. Approve or reject their registration requests.
            </p>
            <div id="registrationList">
                <!-- Registration requests will be loaded here -->
            </div>
        </div>

        <!-- Summary Tab -->
        <div id="summary" class="tab-content">
            <h2>Expense Summary</h2>
            
            <div class="summary-section">
                <div class="summary-card">
                    <h3>Total Group Expenses</h3>
                    <div class="summary-amount" id="totalGroupExpense">â‚¹0.00</div>
                </div>
            </div>

            <div class="summary-section">
                <h3>Individual Expenses</h3>
                <p class="note-text">Total amount paid by each person (approved expenses only)</p>
                <div id="individualExpensesList">
                    <!-- Individual expenses will be loaded here -->
                </div>
            </div>

            <div class="summary-section">
                <h3>Individual Shares</h3>
                <p class="note-text">Total amount each person owes (their share of all expenses)</p>
                <div id="individualSharesList">
                    <!-- Individual shares will be loaded here -->
                </div>
            </div>
        </div>

        <!-- My Balance Tab -->
        <div id="balance" class="tab-content">
            <h2>My Balance Summary</h2>
            <div id="adminBalanceSummary">
                <!-- Balance summary will be shown here -->
            </div>
        </div>

        <!-- User Links Tab -->
        <div id="links" class="tab-content">
            <h2>All User Links</h2>
            <p class="note-text">
                Access links for all users are stored here. You can retrieve and share them if users lose their links.
                The admin link is automatically stored. Add the shared user link below for easy retrieval.
            </p>
            
            <div class="form-group">
                <label>Add Shared User Link (from setup page):</label>
                <input type="text" id="sharedUserLink" placeholder="Paste the shared user link from setup page">
                <button class="btn btn-primary btn-margin-top" onclick="addSharedUserLink()">â• Store User Link</button>
                <p class="note-text" style="margin-top: 8px; font-size: 13px;">
                    ğŸ’¡ Copy the "User Link" from the setup page and paste it here to store it for future reference.
                </p>
            </div>
            
            <div id="userLinksList">
                <!-- User links will be loaded here -->
            </div>
        </div>

        <!-- Participants Tab -->
        <div id="participants" class="tab-content">
            <h2>Manage Participants</h2>
            
            <div class="form-group">
                <label>Add Participant:</label>
                <input type="text" id="participantName" placeholder="Enter name">
                <button class="btn btn-primary btn-margin-top" onclick="addParticipant()">â¡ï¸ Add Participant</button>
            </div>

            <div class="participant-list" id="participantList">
                <!-- Participants will be loaded here -->
            </div>
        </div>

        <!-- Expenses Tab -->
        <div id="expenses" class="tab-content">
            <h2>Add New Expense (Auto-Approved)</h2>
            
            <div class="form-group">
                <label>Date:</label>
                <input type="date" id="expenseDate">
            </div>

            <div class="form-group">
                <label>Description:</label>
                <input type="text" id="expenseDescription" placeholder="e.g., Dinner at restaurant">
            </div>

            <div class="form-group">
                <label>Amount (â‚¹):</label>
                <input type="number" id="expenseAmount" placeholder="0.00" step="0.01">
            </div>

            <div class="form-group">
                <label>Paid By:</label>
                <select id="expensePaidBy">
                    <option value="">Select participant...</option>
                </select>
            </div>

            <div class="form-group">
                <label>Split Between:</label>
                <div id="splitCheckboxes" class="split-checkboxes">
                    <!-- Checkboxes will be loaded here -->
                </div>
            </div>

            <button class="btn btn-primary" onclick="submitExpense()">âœ… Add Expense</button>

            <h2 class="section-margin-top">All Expenses</h2>
            <div class="expense-list" id="expenseList">
                <!-- Expenses will be loaded here -->
            </div>
        </div>

        <!-- Settlements Tab -->
        <div id="settlements" class="tab-content">
            <h2>Settlement Calculations</h2>
            
            <div class="settlement-summary">
                <h3>Who Owes Whom</h3>
                <div id="settlementList">
                    <!-- Settlement calculations will be shown here -->
                </div>
            </div>

            <div class="settlement-confirmations">
                <h3>Confirmed Settlements</h3>
                <div id="confirmedSettlements">
                    <!-- Confirmed settlements will be shown here -->
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/admin.js"></script>
</body>
</html>

